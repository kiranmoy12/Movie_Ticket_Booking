<div class="position-fixed top-0 end-0 p-3" style="z-index: 1100;">
    {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show d-flex flex-column align-items-start shadow auto-dismiss" role="alert" style="min-width: 300px; position: relative;">
            <div class="d-flex align-items-center w-100">
                {% if "success" in message.tags %}
                    <svg class="me-2" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="green" viewBox="0 0 16 16">
                        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.5 11.5L3 8l1.4-1.4 2.1 2.1 5.1-5.1L13 5l-6.5 6.5z"/>
                    </svg>
                {% elif "error" in message.tags %}
                    <svg class="me-2" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="red" viewBox="0 0 16 16">
                        <path d="M8.982 1.566a1.13 1.13 0 0 0-1.964 0L.165 13.233c-.457.778.091 1.767.982 1.767h13.707c.89 0 1.438-.99.982-1.767L8.982 1.566zM7.002 5h2v4h-2V5zm0 6h2v2h-2v-2z"/>
                    </svg>
                {% endif %}
                <span>{{ message }}</span>
                <button type="button" class="btn-close ms-auto" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            
            <div class="toast-progress w-100 mt-2"></div>
        </div>
    {% endfor %}
</div>

<style>
.toast-progress {
    height: 4px;
    background-color: #007bff;
    animation: progressAnim 5s linear forwards;
    border-radius: 0 0 5px 5px;
}

@keyframes progressAnim {
    from { width: 100%; }
    to { width: 0%; }
}
</style>

<!-- Add this script after Bootstrap in base.html or at bottom of this file -->
<script>
document.addEventListener("DOMContentLoaded", function () {
    const alerts = document.querySelectorAll('.auto-dismiss');
    alerts.forEach(alert => {
        setTimeout(() => {
            alert.classList.remove('show');
            alert.classList.add('hide');
        }, 5000); // auto-hide after 5s
    });
});
</script>
